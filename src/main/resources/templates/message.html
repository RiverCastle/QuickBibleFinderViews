<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>성경 말씀</title>
    <style>
        body {
            background-color: black;
            color: white;
            font-family: "Noto Sans KR";
            font-weight: bold;
            margin: 10px;
        }

        .verse-info-container {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .verse-info-container p {
            margin: 0;
            font-size: 50px;
        }

        .book-title-container {
            font-size: 28px;
            font-weight: bold;
        }
        .button-container {
          position: fixed;
          bottom: 20px;
          width: 100%;
          display: flex;
          justify-content: space-between;
        }

        .left-arrow,
        .right-arrow {
          width: 0;
          height: 0;
          border-top: 10px solid transparent;
          border-bottom: 10px solid transparent;
          background-color: #333;
          padding: 20px;
          cursor: pointer;
        }

        .left-arrow {
          border-right: 20px solid #fff;
        }

        .right-arrow {
          border-left: 20px solid #fff;
        }
    </style>
</head>
<body>
<div class="verse-info-container">
    <p class="book-title-container">sample title</p>
    <p class="message">sample message</p>
</div>

<div class="button-container">
    <button class="left-arrow"></button>
    <button class="right-arrow"></button>
</div>

<script>
    var content;
    var title;
    var chapter;
    var verse;
    var message;

    window.addEventListener('message', (event) => {
      content = event.data[0];
      title = content.title;
      chapter = content.chapter;
      verse = content.verse;
      message = content.message;
      updateVerseDisplay(title, chapter, verse, message);
      console.log("말씀 열기")

      function updateVerseDisplay(title, chapter, verse, message) {
        const titleElement = document.querySelector('.book-title-container');
        const verseMessageElement = document.querySelector('.message');

        titleElement.textContent = title+chapter+':'+verse;
        verseMessageElement.textContent = message;
        }
    });

    // Add event listeners to the left and right arrow buttons
    const leftArrowButton = document.querySelector('.left-arrow');
    const rightArrowButton = document.querySelector('.right-arrow');

    leftArrowButton.addEventListener('click', () => {
        // Update the verse display with the previous verse
        const currentVerse = parseInt(verse);
        if (currentVerse > 1) {
            updateVerseDisplay(`${title}/${chapter}:${currentVerse - 1}`);
            verse = verse - 1;
        }
    });

    rightArrowButton.addEventListener('click', () => {
        // Update the verse display with the next verse
        const currentVerse = parseInt(verse);
        updateVerseDisplay(`${title}/${chapter}:${currentVerse + 1}`);
        verse = verse + 1;
    });

    // Helper function to update the verse display
    function updateVerseDisplay(url) {
        console.log("말씀 선포 업데이트")
        fetch(url)
            .then(response => response.json())
            .then(data => {
                const { title, chapter, verse, message } = data[0];
                const titleElement = document.querySelector('.book-title-container');
                const verseMessageElement = document.querySelector('.message');

                titleElement.textContent = `${title} ${chapter}:${verse}`;
                titleElement.textContent = `${title} ${chapter}:${verse}`;

                verseMessageElement.textContent = message;
            })
            .catch(error => console.error(error));
    }


</script>
</body>
</html>